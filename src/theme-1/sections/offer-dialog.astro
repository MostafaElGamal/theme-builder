<sl-dialog
  id='offer-dialog'
  class='offer-dialog hidden'
  no-header
>
  <div class='flex flex-col items-center'>
    <div class='relative'>
      <a>
        <img
          src='https://media.zid.store/b962db3a-9aad-41a2-aa9a-fe622a1dde26/6b85aaec-5bfd-4e1e-8706-d1c000164a05.jpg'
          alt='Special Offer'
          class='w-full min-h-96 mb-6'
        />
      </a>

      <button
        id='close-offer-btn'
        class='rounded-full !w-8 !h-8 bg-white absolute top-4 end-4 z-10 flex flex-col items-center justify-center'
      >
        <i
          class='ph ph-x text-gray-600 hover:text-gray-900 cursor-pointer'
          slot='close-button'
        >
        </i>
      </button>
    </div>
    <div class='!p-3 flex flex-col items-center'>
      <h2 class='text-3xl font-bold text-gray-900 mb-3 text-center'>
        Get 20% Off Your First Order!
      </h2>
      <p class='text-lg text-gray-600 mb-6 leading-relaxed text-center px-4'>
        Sign up now and receive an exclusive discount on your first purchase. Limited time offer!
      </p>
      <a class='btn btn-main mx-auto w-[80%] text-center'>Shop Now</a>
    </div>
  </div>
</sl-dialog>

<script>
  async function initOfferDialog() {
    // Wait for Shoelace components to be defined
    await customElements.whenDefined("sl-dialog");

    const dialog = document.getElementById("offer-dialog");

    if (!dialog) {
      console.error("Dialog not found");
      return;
    }

    dialog.classList.remove("hidden");

    // Handle close button click
    const closeButton = document.getElementById("close-offer-btn");
    if (closeButton) {
      closeButton.addEventListener("click", () => {
        dialog.hide();
      });
    }

    // Show dialog after a short delay (1 second)
    setTimeout(() => {
      dialog.show();
    }, 1000);

    // Handle the Shop Now button click
    const shopButton = dialog.querySelector(".offer-button");
    if (shopButton) {
      shopButton.addEventListener("click", () => {
        dialog.hide();
      });
    }
  }

  document.addEventListener("DOMContentLoaded", initOfferDialog);
</script>
